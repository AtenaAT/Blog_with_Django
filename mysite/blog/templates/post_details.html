{% extends 'index.html' %}

{% block body %}
    
        <div>
            <h3>This is our post number {{post.id}}:</h3>
            <h1>{% block title %}
                 {{ post.title }} 
                 {% endblock title %}
            </h1>

            <p >{{ post.author }} | {{ post.created }}</p>
            <img src="{{ post.image.url }}" width="300" height="300">
            <p >{{post.descripton}}</p>
        </div>

        
        <!-- comments -->
          
                <h3>{{ comments.count }} comments</h3>
                <h3>{{ likes.count }} Likes</h3>
                <hr>
                {% for comment in comments %}
                
                <p>
                    {{ comment.author }}
                    <span >
                    {{ comment.created }}
                    </span>
                </p>
                {{ comment.content }}
                <hr>
            
                {% endfor %}




                <!-- like -->


                <form action="{% url 'like_post'   %}" method="POST" >

                   
                    {% csrf_token %}
                    <input type="hidden" name="post\_id" value="{{ post.id }}">
                    {% if author not in post.likes.all %}

                    <button class="btn btn-success" id="like" type="submit">Like</button>

                    {% else %}

                    <button class="btn btn-danger" id="unlike" type="submit">UnLike</button>

                    {% endif %}

                    </form>








        
                {% if user.is_authenticated %}
                    <h3>Leave a comment</h3>
                    <form method="post">
                        {{ comment_form.as_p }}
                        {% csrf_token %}
                    <button type="submit" >Submit</button>
                    </form>
                {% else %}
                   <p><a href="{% url 'login'   %}" >login</a> : برای کامنت گذاشتن ابتدا وارد شوید</p>
                {% endif %}

                







               
        
{% endblock body %}